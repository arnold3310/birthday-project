<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Surprise</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --main-bg: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); --accent: #ff4d6d; }
        body { margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: var(--main-bg); font-family: 'Microsoft JhengHei', sans-serif; color: #fff; overflow-x: hidden; }
        .card { text-align: center; background: rgba(255, 255, 255, 0.23); padding: 40px; border-radius: 20px; backdrop-filter: blur(15px); box-shadow: 0 8px 32px rgba(0,0,0,0.15); width: 85%; max-width: 450px; }
        .hidden { display: none; }
        
        /* å¯†ç¢¼è¼¸å…¥æ¡†æ¨£å¼ */
        input { padding: 10px; border-radius: 10px; border: none; width: 60%; margin-bottom: 15px; text-align: center; font-size: 1.2rem; outline: none; }
        .btn { padding: 12px 25px; border-radius: 50px; border: none; background: var(--accent); color: white; cursor: pointer; font-size: 1rem; transition: 0.3s; margin: 5px; }
        .btn:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(255, 77, 109, 0.3); }

        /* æ–‡æ¡ˆå€æ¨£å¼ */
        #typing-text { font-size: 1.3rem; line-height: 1.8; margin-bottom: 20px; min-height: 100px; }
    </style>
</head>
<body>

    <div id="step1" class="card">
        <h2>ğŸ”’ èº«åˆ†é©—è­‰</h2>
        <p>è«‹è¼¸å…¥é€™ä»½é©šå–œçš„å°ˆå±¬å¯†ç¢¼</p>
        <input type="password" id="pw-input" placeholder="å¯†ç¢¼ 4 ç¢¼">
        <br>
        <button class="btn" onclick="checkPassword()">è§£é–é©šå–œ</button>
    </div>

    <div id="step2" class="card hidden">
        <h2>æˆ‘æƒ³å°å¦³èªª...</h2>
        <div id="typing-text"></div>
        <button id="next-btn" class="btn hidden" onclick="showInteractions()">ç„¶å¾Œå‘¢ï¼Ÿ</button>
    </div>

    <div id="step3" class="card hidden">
        <h1 id="final-title">Happy Birthday!</h1>
        <div id="display-area" style="min-height: 60px; font-weight: bold; margin: 15px 0;">ç¥å¦³æ–°çš„ä¸€æ­²å¤©å¤©é–‹å¿ƒï¼</div>
        <div class="btn-group">
            <button class="btn" onclick="getCoupon()">æŠ½ç¦®ç‰©åˆ¸</button>
            <button class="btn" onclick="changeMood()">è®Šæ›å¿ƒæƒ…</button>
            <button class="btn" onclick="finalSurprise()">é»ç‡ƒé©šå–œ</button>
        </div>
    </div>

    <script>
        const correctPw = '0121'; // ä½ è¨­å®šçš„å¯†ç¢¼
        const heartWords = "é›–ç„¶æˆ‘å€‘é‚„æ²’çœŸæ­£è¦‹éé¢ï¼Œ\nä½†é€™æ®µæ™‚é–“å’Œå¦³èŠå¤©çœŸçš„å¾ˆé–‹å¿ƒã€‚\nåœ¨é€™å€‹ç‰¹åˆ¥çš„æ—¥å­ï¼Œ\næƒ³ç”¨æˆ‘æ­£åœ¨å­¸çš„ç¨‹å¼ï¼Œçµ¦å¦³ä¸€é»ä¸ä¸€æ¨£çš„ç¥ç¦...";

        function checkPassword() {
            const input = document.getElementById('pw-input').value;
            if (input === correctPw) {
                document.getElementById('step1').classList.add('hidden');
                document.getElementById('step2').classList.remove('hidden');
                startTyping();
            } else {
                alert("å¯†ç¢¼ä¸å°å–”ï¼Œå†è©¦è©¦çœ‹ï¼");
            }
        }

        function startTyping() {
            const area = document.getElementById('typing-text');
            let i = 0;
            function type() {
                if (i < heartWords.length) {
                    area.innerHTML += heartWords.charAt(i) === '\n' ? '<br>' : heartWords.charAt(i);
                    i++;
                    setTimeout(type, 100);
                } else {
                    document.getElementById('next-btn').classList.remove('hidden');
                }
            }
            type();
        }

        function showInteractions() {
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step3').classList.remove('hidden');
        }

        function getCoupon() {
            const coupons = ["ã€è¦‹é¢å¤§é¤åˆ¸ã€‘ä¸‹æ¬¡è¦‹é¢æˆ‘è«‹å®¢ï¼ğŸ”", "ã€å£å¿ƒæƒ…å‚¾è½åˆ¸ã€‘éš¨å«éš¨åˆ°ï¼ğŸ“", "ã€çå¥¶å…Œæ›åˆ¸ã€‘æƒ³å–é£²æ–™éš¨æ™‚é ˜å–ã€‚ğŸ§‹"];
            const pick = coupons[Math.floor(Math.random() * coupons.length)];
            document.getElementById('display-area').innerText = pick;
        }

        function changeMood() {
            const colors = ['#a18cd1', '#84fab0', '#fccb90', '#ff9a9e'];
            document.body.style.background = colors[Math.floor(Math.random() * colors.length)];
        }

        function finalSurprise() {
            document.getElementById('final-title').innerText = "ğŸ‚ ç”Ÿæ—¥å¿«æ¨‚ï¼ğŸ‚";
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        }
    </script>
</body>
</html>
