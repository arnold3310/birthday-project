<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 21st Birthday</title>
    <script src="https://cdn.jsdelivr.net/npm/fireworks-js@2.10.7/dist/index.umd.js"></script>
    <style>
        /* =========================================
           GLOBAL STYLES (å…¨åŸŸè¨­å®š - ä¸ç”¨å‹•)
           ========================================= */
        body {
            margin: 0; padding: 0; background-color: #000; color: #fff;
            font-family: 'Microsoft JhengHei', sans-serif;
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
            overflow: hidden;
        }
        /* éš±è—æ‰€æœ‰å ´æ™¯ï¼Œåªæœ‰åŠ ä¸Š active æ‰æœƒé¡¯ç¤º */
        .scene-container { display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; justify-content: center; align-items: center; flex-direction: column; }
        .scene-container.active { display: flex; }
        
        /* èƒŒæ™¯ç…™ç«èˆ‡å½±ç‰‡ */
        #fireworks-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }.fireworks-top { z-index: 999 !important; }

        #bg-video { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; object-fit: cover; z-index: -1; filter: brightness(0.4); opacity: 0; transition: opacity 2s ease-in; }

/* =========================================
           å‡ç´šç‰ˆï¼šé‡å­æ ¸å¿ƒè½‰å ´ç‰¹æ•ˆ
           ========================================= */
        #scene-transition-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: #000; z-index: 10000;
            display: none; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.8s ease;
        }

        /* æ ¸å¿ƒå®¹å™¨ */
        .loader-box { position: relative; width: 150px; height: 150px; display: flex; justify-content: center; align-items: center; }

        /* ä¸‰å±¤æ—‹è½‰å…‰ç’° */
        .ring { position: absolute; border-radius: 50%; border: 3px solid transparent; }
        
        /* å¤–åœˆ (ç¶ è‰²) */
        .ring-1 { 
            width: 100%; height: 100%; 
            border-top: 4px solid #0f0; border-left: 4px solid #0f0;
            box-shadow: 0 0 20px #0f0; 
            animation: spinA 1.5s linear infinite; 
        }
        /* ä¸­åœˆ (è—è‰²) */
        .ring-2 { 
            width: 70%; height: 70%; 
            border-right: 4px solid #00f0ff; border-bottom: 4px solid #00f0ff;
            box-shadow: 0 0 20px #00f0ff; 
            animation: spinB 1.2s linear infinite; 
        }
        /* å…§åœˆ (ç²‰ç´…) */
        .ring-3 { 
            width: 40%; height: 40%; 
            border-top: 4px solid #ff00ff; 
            box-shadow: 0 0 15px #ff00ff; 
            animation: spinA 0.8s linear infinite; 
        }

        /* æ–‡å­—ç‰¹æ•ˆ (å‘¼å¸+æ•…éšœæ„Ÿ) */
        .transition-text { 
            margin-top: 40px; color: #fff; font-family: monospace; 
            font-size: 1.5rem; letter-spacing: 3px; font-weight: bold;
            text-shadow: 2px 0 #ff00ff, -2px 0 #00f0ff; /* æŠ–éŸ³æ•…éšœé¢¨é™°å½± */
            animation: pulseText 1s ease-in-out infinite alternate;
        }

        @keyframes spinA { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes spinB { 0% { transform: rotate(360deg); } 100% { transform: rotate(0deg); } } /* åå‘è½‰ */
        @keyframes pulseText { 0% { opacity: 0.7; letter-spacing: 3px; } 100% { opacity: 1; letter-spacing: 6px; } }

        /* =========================================
           SCENE 1 STYLE: çµ‚ç«¯æ©Ÿç™»å…¥
           ========================================= */

        .s1_terminal {
            border: 1px solid #0f0; padding: 40px; width: 85%; max-width: 400px;
            background: rgba(0, 20, 0, 0.9); 
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.2), inset 0 0 10px rgba(0, 255, 0, 0.1);
            font-family: 'Courier New', monospace; text-align: center; position: relative; z-index: 10;
            border-radius: 5px;
        }
        .s1_text { color: #0f0; font-size: 1rem; text-align: left; margin-bottom: 20px; min-height: 80px; text-shadow: 0 0 5px #0f0; line-height: 1.5; }
        .s1_input { background: transparent; border: none; border-bottom: 2px solid #0f0; color: #fff; font-size: 1.5rem; text-align: center; width: 80%; outline: none; margin-bottom: 25px; letter-spacing: 5px; }
        .s1_btn { background: #0f0; color: #000; border: none; padding: 12px 20px; font-weight: bold; cursor: pointer; width: 100%; font-size: 1.1rem; transition: 0.3s; }
        .s1_btn:hover { background: #fff; box-shadow: 0 0 20px #fff; }

        /* é€²åº¦æ¢æ¨£å¼ */
        .s1_loading_container { display: none; width: 100%; margin-top: 20px; text-align: left; }
        .s1_loading_bar_bg { width: 100%; height: 10px; background: rgba(0, 255, 0, 0.1); border: 1px solid #0f0; margin-top: 10px; position: relative; }
        .s1_loading_bar_fill { width: 0%; height: 100%; background: #0f0; box-shadow: 0 0 10px #0f0; transition: width 0.1s linear; }
        .s1_status { color: #0f0; font-size: 0.8rem; margin-top: 5px; }

        /* =========================================
           SCENE 2 STYLE: èµ°ä½æ¸¬è©¦ (é«˜ç§‘æŠ€è­¦ç¤ºç‰ˆ)
           ========================================= */
        .s2_card { 
            background: rgba(20, 20, 20, 0.9); 
            padding: 40px; border-radius: 10px; 
            text-align: center; 
            border: 2px solid #ffd700; /* è­¦ç¤ºé»ƒé‚Šæ¡† */
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            z-index: 10; width: 320px;
            position: relative;
            overflow: hidden; /* è®“æƒæç·šé™åˆ¶åœ¨æ¡†å…§ */
        }
        /* å¢åŠ æƒæç·šå‹•ç•« */
        .s2_card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 5px;
            background: rgba(255, 215, 0, 0.5);
            box-shadow: 0 0 10px #ffd700;
            animation: scan 2s linear infinite;
        }
        @keyframes scan { 0% { top: 0; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }

        .s2_title { color: #ffd700; font-size: 1.5rem; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 5px #ffd700; }
        .s2_text { color: #fff; font-size: 1rem; margin-bottom: 30px; line-height: 1.5; }
        
        /* æ­£å¸¸æŒ‰éˆ• (ç¶ è‰²å®‰å…¨) */
        .s2_btn_ok { 
            padding: 12px 30px; background: transparent; 
            color: #0f0; border: 2px solid #0f0; 
            border-radius: 5px; cursor: pointer; font-size: 1.1rem; font-weight: bold;
            text-shadow: 0 0 5px #0f0; box-shadow: 0 0 5px #0f0;
            transition: 0.2s;
        }
        .s2_btn_ok:hover { background: #0f0; color: #000; box-shadow: 0 0 20px #0f0; }

        /* é€ƒè·‘æŒ‰éˆ• (ç´…è‰²å±éšª) */
        .s2_btn_run { 
            padding: 12px 20px; background: #ff003c; 
            color: #fff; border: none; 
            border-radius: 5px; cursor: pointer; font-size: 1rem; 
            font-weight: bold; position: relative; 
            transition: 0.1s ease-out; /* å¿«é€Ÿç§»å‹• */
            z-index: 100; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
        }

/* =========================================
           SCENE 3 STYLE: æ•…éšœé˜²è­·ç‰ˆ
           ========================================= */
        .s3_card { 
            background: rgba(10, 10, 10, 0.95); /* æ·±è‰²èƒŒæ™¯ */
            padding: 40px; border-radius: 10px; 
            text-align: center; 
            border: 1px solid #333;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.1);
            z-index: 10; width: 350px; position: relative;
        }
        .s3_card h2 { text-shadow: 0 0 10px #ff4d6d; letter-spacing: 2px; }

        /* æŒ‰éˆ•å®¹å™¨ï¼šè¨­ç‚º relative è®“æ™®é€šæŒ‰éˆ•å¯ä»¥åœ¨è£¡é¢è·‘ */
        .s3_btn_container { 
            position: relative; 
            height: 150px; /* å¢åŠ é«˜åº¦ï¼Œè®“æŒ‰éˆ•æœ‰æ›´å¤šç©ºé–“èº²è— */
            width: 100%;
            margin-top: 20px;
            overflow: hidden; 
            border: 1px dashed rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        /* æ­£ç¢ºé¸é … (å¸¥æ°£éœ“è™¹) */
        .s3_btn_cool { 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            padding: 12px 30px; background: transparent; color: #00f0ff; 
            border: 2px solid #00f0ff; border-radius: 5px; 
            font-size: 1.1rem; font-weight: bold; cursor: pointer; z-index: 20;
            box-shadow: 0 0 15px #00f0ff; transition: 0.3s;
        }
        .s3_btn_cool:hover { background: #00f0ff; color: #000; box-shadow: 0 0 30px #00f0ff; }
        
        /* æƒ¡æé¸é … (æ•…éšœé¢¨æ ¼) */
        .s3_btn_normal { 
            position: absolute; padding: 10px 20px; 
            background: #333; color: #888; border: 1px solid #555; 
            border-radius: 5px; cursor: pointer; font-size: 0.9rem;
            transition: all 0.1s; /* å¿«é€Ÿåæ‡‰ */
            z-index: 10;
        }
        /* è§¸ç™¼æ•…éšœæ™‚çš„æ¨£å­ */
        .s3_glitch {
            background: #ff003c !important; color: #fff !important; border-color: #ff003c !important;
            animation: shake 0.2s infinite;
            box-shadow: 0 0 15px #ff003c;
        }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        /* =========================================
           è£œå›éºå¤±çš„ä»£ç¢¼ï¼šè—å±ç•«é¢ (é è¨­éš±è—)
           ========================================= */
        #s3-bsod {
            position: fixed; 
            top: 0; left: 0; 
            width: 100vw; height: 100vh;
            background: #0000aa; color: #fff; 
            font-family: 'Consolas', monospace;
            display: none; /* ğŸ‘ˆ é—œéµï¼šé è¨­è¦éš±è—ï¼ */
            flex-direction: column; 
            justify-content: center;
            align-items: center; 
            padding: 50px; 
            z-index: 9999; 
            text-align: left;
        }
        /* =========================================
           SCENE 4 STYLE: ç…§ç‰‡å›æ†¶æµ
           ========================================= */
        .s4_container { width: 90%; max-width: 500px; text-align: center; z-index: 10; }
        .s4_photo_frame { 
            width: 100%; height: 350px; background: #000; border: 2px solid #fff; 
            display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 20px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }
        .s4_img { max-width: 100%; max-height: 100%; object-fit: contain; animation: fadeIn 1s ease; }
        .s4_caption { font-size: 1.2rem; margin-bottom: 20px; min-height: 30px; text-shadow: 1px 1px 5px #000; }
        .s4_btn { padding: 10px 30px; background: rgba(255,255,255,0.2); border: 1px solid #fff; color: #fff; cursor: pointer; border-radius: 30px; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        /* =========================================
           SCENE 5 STYLE: è›‹ç³•èˆ‡è¨±é¡˜
           ========================================= */
        .s5_container { text-align: center; z-index: 10; }
        .s5_cake_box { position: relative; width: 200px; height: 200px; margin: 0 auto; }
        /* ç°¡æ˜“ç²¾ç·»è›‹ç³• CSS */
        .s5_cake_base { position: absolute; bottom: 20px; left: 25px; width: 150px; height: 60px; background: #f5c096; border-radius: 10px; }
        .s5_cake_top { position: absolute; bottom: 80px; left: 25px; width: 150px; height: 50px; background: #ffbcd9; border-radius: 15px 15px 5px 5px; }
        .s5_candle { position: absolute; bottom: 130px; left: 95px; width: 10px; height: 40px; background: #fff; z-index: 2; }
        .s5_flame { 
            position: absolute; top: -20px; left: -2px; width: 14px; height: 20px; background: #ffcc00; 
            border-radius: 50% 50% 20% 20%; animation: flicker 0.5s infinite alternate; display: none; 
            box-shadow: 0 0 20px #ff6600;
        }
        .s5_btn { margin-top: 30px; padding: 12px 30px; background: #ff4d6d; color: white; border: none; border-radius: 50px; cursor: pointer; font-size: 1.2rem; font-weight: bold; }
        @keyframes flicker { from { opacity: 0.8; transform: scale(1); } to { opacity: 1; transform: scale(1.1); } }

        /* =========================================
           SCENE 6 STYLE: ä¿¡å°èˆ‡çµå°¾
           ========================================= */
        .s6_envelope { 
            width: 300px; height: 200px; background: #ff758c; position: relative; margin: 0 auto;
            cursor: pointer; transform: scale(0); transition: transform 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 20; border-radius: 5px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .s6_flap { position: absolute; top: 0; left: 0; border-left: 150px solid transparent; border-right: 150px solid transparent; border-top: 110px solid #ff9a9e; transform-origin: top; transition: 0.6s; }
        .s6_letter {
            position: absolute; top: 10px; left: 15px; width: 270px; height: 300px; background: #fff; color: #333;
            padding: 20px; box-sizing: border-box; font-size: 1rem; line-height: 1.6; border-radius: 5px;
            transform: translateY(0); transition: 1s; opacity: 0; text-align: left;
        }
        /* é–‹ä¿¡å‹•ç•« */
        .s6_open .s6_flap { transform: rotateX(180deg); }
        .s6_open .s6_letter { transform: translateY(-150px); opacity: 1; z-index: 50; }
    </style>
</head>
<body>
     
    <div id="scene-transition-overlay">
        <div class="loader-box">
            <div class="ring ring-1"></div>
            <div class="ring ring-2"></div>
            <div class="ring ring-3"></div>
        </div>
        <div class="transition-text">DATA UPLOADING...</div>
    </div>

    <div id="fireworks-canvas"></div>
    <video muted loop playsinline id="bg-video"><source src="bgvideo.mp4" type="video/mp4"></video>
    
    <audio id="sfx-login"><source src="sfx_login.mp3" type="audio/mpeg"></audio>
    <audio id="bgm-login" loop><source src="bg_login.mp3" type="audio/mpeg"></audio>
    <audio id="bgm-memory" loop><source src="bg_memory.mp3" type="audio/mpeg"></audio>
    <audio id="bgm-party" loop><source src="bg_party.mp3" type="audio/mpeg"></audio>

    <div id="scene-1" class="scene-container active">
        <div class="s1_terminal" id="s1-terminal">
            <div class="s1_text" id="s1-msg"></div>
            
            <div id="s1-input-area">
                <input type="password" id="s1-input" class="s1_input" placeholder="****">
                <button class="s1_btn" onclick="s1_login()"> è¨ªå•ç³»çµ± </button>
            </div>

            <div id="s1-loading" class="s1_loading_container">
                <div id="s1-loading-msg" style="color:#0f0;">ç™»å…¥æˆåŠŸ...</div>
                <div class="s1_loading_bar_bg">
                    <div id="s1-bar-fill" class="s1_loading_bar_fill"></div>
                </div>
                <div class="s1_status">åŠ è¼‰ä¸­: <span id="s1-percent">0</span>%</div>
                <div id="s1-log" style="font-size: 0.7rem; color: #0f0; margin-top: 10px; text-align: left; opacity: 0.7;"></div>
            </div>
        </div>
    </div>

<div id="scene-2" class="scene-container">
        <div class="s2_card">
            <h2 class="s2_title">âš ï¸ SYSTEM ALERT</h2>
            <div style="width: 100%; height: 1px; background: #ffd700; margin: 10px 0; opacity: 0.5;"></div>
            <p class="s2_text">
                æª¢æ¸¬åˆ°é«˜å¼·åº¦å£½æ˜Ÿèƒ½é‡ï¼<br>
                æº–å‚™å¥½é€²å…¥é«˜é›£åº¦å‰¯æœ¬äº†å—?ã€‚<br>
                <span style="font-size: 0.9rem; opacity: 0.7;"></span>
            </p>
            
            <div style="height: 80px; display: flex; justify-content: center; align-items: center; gap: 20px;">
                <button class="s2_btn_ok" onclick="gotoScene(3)">æº–å‚™å¥½äº†</button>
                
                <button id="s2-run-btn" class="s2_btn_run" onclick="s2_runAway()">é‚„æ²’...</button>
            </div>
        </div>
    </div>

<div id="scene-3" class="scene-container">
        <div class="s3_card" id="s3-card">
            <h2 style="color: #ff4d6d;">âš ï¸ çµ‚æ¥µå¯©ç¾é©—è­‰</h2>
            <p>åœ¨é€²å…¥è³‡æ–™åº«å‰ï¼Œç³»çµ±éœ€è¦æ ¡æº–æ‚¨çš„å¯©ç¾è§€ï¼š<br><strong>ã€Œæ‚¨è¦ºå¾—é–‹ç™¼æ­¤ç¶²é çš„äººå¦‚ä½•ï¼Ÿã€</strong></p>
            
            <div class="s3_btn_container" id="s3-area">
                <button class="s3_btn_cool" onclick="s3_success()">è¶…ç´šå¸¥ / ç”¨å¿ƒï¼</button>
                <button id="s3-normal-btn" class="s3_btn_normal" onclick="s3_crash()">æ™®é€šè€Œå·²</button>
            </div>
            
            <div id="s3-warning">âš ï¸ åµæ¸¬åˆ°è¦–ç¶²è†œç•°å¸¸é¢¨éšªï¼Œå·²éæ¿¾ä½ç¾æ„Ÿé¸é …ã€‚</div>
        </div>
    </div>

    <div id="s3-bsod">
        <div style="font-size: 5rem; margin-bottom: 20px;">:(</div>
        <div style="font-size: 1.5rem; width: 80%;">
            æ‚¨çš„é›»è…¦é‡åˆ°å•é¡Œï¼Œéœ€è¦é‡æ–°å•Ÿå‹•ã€‚æˆ‘å€‘åªæœƒæ”¶é›†æŸäº›éŒ¯èª¤è³‡è¨Šï¼Œç„¶å¾Œç‚ºæ‚¨é‡æ–°å•Ÿå‹•ã€‚<br><br>
            <span style="font-size: 1rem; opacity: 0.8;">
                100% å®Œæˆ<br><br>
                å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šè³‡è¨Šï¼Œç¨å¾Œå¯ä»¥åœ¨ç·šä¸Šæœå°‹æ­¤éŒ¯èª¤: <br>
                <strong>CRITICAL_PROCESS_DIED: TRUTH_NOT_FOUND</strong><br><br>
                ç³»çµ±åµæ¸¬åˆ°ã€Œæ™®é€šã€é‚è¼¯çŸ›ç›¾ï¼Œè«‹é»æ“Šã€è¶…ç´šå¸¥ã€‘é‡å•Ÿç³»çµ±ã€‚
            </span>
        </div>
        <button class="s1_btn" style="width: 200px; margin-top: 50px;" onclick="s3_reboot()">[ é‡æ–°å•Ÿå‹• ]</button>
    </div>
    
    <div id="scene-4" class="scene-container">
        <div class="s4_container">
            <h3 id="s4-counter">Loading Memories...</h3>
            <div class="s4_photo_frame">
                <img id="s4-img" class="s4_img" src="" alt="Memory">
            </div>
            <div id="s4-caption" class="s4_caption"></div>
            <button class="s4_btn" onclick="s4_next()">ä¸‹ä¸€å¼µ</button>
        </div>
    </div>

    <div id="scene-5" class="scene-container">
        <div class="s5_container">
            <h1>Level 21 Unlocked!</h1>
            <div class="s5_cake_box">
                <div class="s5_cake_base"></div>
                <div class="s5_cake_top"></div>
                <div class="s5_candle"><div id="s5-flame" class="s5_flame"></div></div>
            </div>
            
            <button id="s5-btn-light" class="s5_btn" onclick="s5_lightUp()">é»ç‡ƒè–ç«</button>
            
            <button id="s5-btn-next" class="s5_btn" style="display: none; background: #888;" onclick="s5_finish()">ğŸ é ˜å–æ‰è½ç‰©</button>
            </div>
    </div>

    <div id="scene-6" class="scene-container">
        <div id="s6-envelope" class="s6_envelope" onclick="s6_open()">
            <div class="s6_flap"></div>
            <div class="s6_letter" id="s6-content">
                </div>
        </div>
        <h2 style="margin-top: 250px;">ğŸ‘‡ é»æ“Šé–‹å•Ÿæ‰è½ç‰©</h2>
    </div>

    <script>
        // =========================================
        // CONFIG: è«‹åœ¨é€™è£¡ä¿®æ”¹ä½ çš„å…§å®¹
        // =========================================
        const CONFIG = {
            targetName: "å¥³äºŒ",  // å¥¹çš„åå­—
            password: "0121",
            
            // ç¬¬å››å¹•ï¼šç…§ç‰‡æ¸…å–® (è«‹ä¸Šå‚³å°æ‡‰ç…§ç‰‡)
            photos: [
                { src: "photo1.jpg", text: "é€™æ˜¯æˆ‘å€‘ç¬¬ä¸€æ¬¡çµ„éšŠ..." },
                { src: "photo2.jpg", text: "é‚£æ™‚å€™å¦³é‚„åœ¨é›·..." },
                { src: "photo3.jpg", text: "çµ‚æ–¼è´äº†ä¸€å ´ï¼" }
            ],
            
            // ç¬¬å…­å¹•ï¼šæœ€å¾Œçš„ä¿¡
            finalLetter: `
                <h3>Happy Birthday!</h3>
                <p>é€™æ˜¯ä¸€å°è—åœ¨ç¨‹å¼ç¢¼å¾Œçš„ä¿¡ã€‚<br>
                é›–ç„¶åªæ˜¯ç°¡å–®çš„ç¶²é ï¼Œ<br>
                ä½†åŒ…å«äº†æˆ‘å€‘é€™ä¸€å¹´æ»¿æ»¿çš„å›æ†¶ã€‚<br>
                ç¥å¦³ç”Ÿæ—¥å¿«æ¨‚ï¼Œç¹¼çºŒ Carry æˆ‘ï¼</p>
            `
        };

        // åˆå§‹åŒ–ç…™ç«
        const fireworks = new Fireworks.default(document.querySelector('#fireworks-canvas'));

        // é€šç”¨ï¼šåˆ‡æ›å ´æ™¯å‡½å¼
        function gotoScene(n) {
            document.querySelectorAll('.scene-container').forEach(el => el.classList.remove('active'));
            document.getElementById(`scene-${n}`).classList.add('active');
            
            // éŸ³æ¨‚è‡ªå‹•åˆ‡æ›é‚è¼¯
            if(n === 4) switchMusic('bgm-memory');
            if(n === 5) switchMusic('bgm-party');
        }

        function switchMusic(id) {
            document.querySelectorAll('audio').forEach(a => { a.pause(); a.currentTime = 0; });
            document.getElementById(id).play().catch(()=>{});
        }

        // =========================================
        // SCENE 1 LOGIC: çµ‚ç«¯æ©Ÿ
        // =========================================
        window.onload = function() {
            // é€™è£¡ä¿®æ”¹é–‹å ´çš„ç³»çµ±æ–‡å­—
            const msg = `> ç³»çµ±åµæ¸¬å•Ÿå‹•...\n> ç©å®¶ ID: ${CONFIG.targetName}\n> ç™¼ç¾æ•¸æ“šæµï¼Œæ­£åœ¨è§£æ...\n> è«‹æ±‚å­˜å–æ¬Šé™...`;
            const el = document.getElementById('s1-msg');
            let i = 0;
            function type() { 
                if(i < msg.length) { 
                    el.innerHTML = msg.substring(0, i+1).replace(/\n/g, "<br>"); 
                    i++; setTimeout(type, 50); 
                }
            }
            type();
        };

        // 2. ç™»å…¥æª¢æŸ¥ (ä¸­æ–‡éŒ¯èª¤è¨Šæ¯)
        function s1_login() {
            const inputVal = document.getElementById('s1-input').value;
            if(inputVal === CONFIG.password) {
                document.getElementById('sfx-login').play().catch(()=>{});
                document.getElementById('s1-input-area').style.display = 'none';
                document.getElementById('s1-loading').style.display = 'block';
                s1_startLoading();
            } else {
                // é€™è£¡ä¿®æ”¹éŒ¯èª¤è¨Šæ¯
                alert("æ‹’çµ•å­˜å–ï¼šå¯†ç¢¼éŒ¯èª¤ ");
                document.getElementById('s1-input').value = "";
            }
        }

        // 3. é€²åº¦æ¢è·‘å‹• (ä¸­æ–‡ç³»çµ±ç´€éŒ„)
        function s1_startLoading() {
            let percent = 0;
            const bar = document.getElementById('s1-bar-fill');
            const percentText = document.getElementById('s1-percent');
            const logText = document.getElementById('s1-log');
            
            // é€™è£¡ä¿®æ”¹è·‘æ¢æ™‚è·³å‡ºçš„ç³»çµ±è¨Šæ¯
            const logs = [
                "æ­£åœ¨åˆå§‹åŒ–æ ¸å¿ƒæ¨¡çµ„...",
                "åŒæ­¥ç”Ÿæ—¥å›æ†¶æ•¸æ“š...",
                "è¼‰å…¥éŠæˆ²è³‡æºåŒ…...",
                "æ­£åœ¨ç¹éå®‰å…¨é˜²ç«ç‰†...",
                "é€£ç·šè‡³å°ˆå±¬ä¼ºæœå™¨...",
                "ç’°å¢ƒå»ºç½®å®Œæˆ..."
            ];

            const timer = setInterval(() => {
                percent += Math.floor(Math.random() * 3) + 1;
                if (percent >= 100) {
                    percent = 100;
                    clearInterval(timer);
                    
                    // é€™è£¡ä¿®æ”¹è·‘å®Œå¾Œçš„æ–‡å­—
                    document.getElementById('s1-loading-msg').innerText = "æº–å‚™é€²å…¥éŠæˆ²...";
                    setTimeout(() => {
                        const vid = document.getElementById('bg-video'); vid.play(); vid.style.opacity = 1;
                        switchMusic('bgm-login');
                        gotoScene(2);
                    }, 1000);
                }
                
                bar.style.width = percent + "%";
                percentText.innerText = percent;
                
                if (percent % 15 === 0) {
                    logText.innerText = "> " + logs[Math.floor(Math.random() * logs.length)];
                }
            }, 50);
        }

        // =========================================
        // SCENE 2 LOGIC: èµ°ä½æŒ‰éˆ• (å˜²è«·å‡ç´šç‰ˆ)
        // =========================================
        function s2_runAway() {
            const btn = document.getElementById('s2-run-btn');
            
            btn.style.position = 'fixed';
            
            // å˜²è«·èªéŒ„
            const mocks = ["å¤ªæ…¢äº†ï¼", "æŠ“ä¸åˆ°~", "ç¬ç§»ï¼", "ç´¯äº†å—ï¼Ÿ", "å˜¿å˜¿~", "é»ä¸åˆ°XP"];
            const randomText = mocks[Math.floor(Math.random() * mocks.length)];
            
            // è¨ˆç®—éš¨æ©Ÿä½ç½® (é™åˆ¶åœ¨è¦–çª—å…§ï¼Œé¿å…è·‘å‡ºè¢å¹•)
            // window.innerWidth æ¸›å»æŒ‰éˆ•å¯¬åº¦(ç´„100)ï¼Œä¿ç•™é‚Šè·
            const maxX = window.innerWidth - 120; 
            const maxY = window.innerHeight - 60;
            
            const randomX = Math.floor(Math.random() * maxX);
            const randomY = Math.floor(Math.random() * maxY);

            // è¨­å®šæ–°ä½ç½®
            btn.style.left = randomX + "px";
            btn.style.top = randomY + "px";
            
            // æ›´æ–°å˜²è«·æ–‡å­—
            btn.innerText = randomText;
            
            // è®Šæ›´é¡è‰²å¢åŠ æ··äº‚æ„Ÿ
            const colors = ["#ff003c", "#ff8800", "#aa00ff"];
            btn.style.background = colors[Math.floor(Math.random() * colors.length)];
        }

        // =========================================
        // SCENE 3 LOGIC: èª å¯¦æ¸¬è©¦
        // =========================================
// =========================================
// =========================================
        // SCENE 3 LOGIC: å…©éšæ®µå¼äº’å‹• (ç•¶æ©Ÿ -> é–ƒé¿)
        // =========================================
        
        let s3_hardMode = false; // é è¨­ï¼šé‚„æ²’ç•¶æ©Ÿéï¼Œæ‰€ä»¥ä¸æœƒè·‘
        const normalBtn = document.getElementById('s3-normal-btn');
        const btnContainer = document.querySelector('.s3_btn_container');

        // 1. ç›£è½æ»‘é¼ é è¿‘ (Mouse Over)
        // åªæœ‰åœ¨ s3_hardMode = true (é‡å•Ÿå¾Œ) æ‰æœƒè§¸ç™¼è·‘èµ°
        normalBtn.addEventListener('mouseover', () => {
            if (!s3_hardMode) return; // ğŸ’¡ å¦‚æœé‚„æ²’ç•¶æ©Ÿéï¼Œå°±ä»€éº¼éƒ½ä¸åš(ä¹–ä¹–ç«™å¥½)

            // --- ä»¥ä¸‹æ˜¯åŸæœ¬çš„é–ƒé¿é‚è¼¯ ---
            setTimeout(() => {
                moveButton();
            }, 100); 
        });

        // 2. é»æ“Šã€Œæ™®é€šã€æŒ‰éˆ•çš„è¡Œç‚º
        function s3_crash() {
            // ä¸ç®¡æ€æ¨£ï¼Œé»äº†å°±ç•¶æ©Ÿ
            document.getElementById('s3-bsod').style.display = 'flex';
        }

        // 3. è—å±ä¸Šçš„ã€Œé‡æ–°å•Ÿå‹•ã€æŒ‰éˆ•
        function s3_reboot() {
            // éš±è—è—å±
            document.getElementById('s3-bsod').style.display = 'none';
            
            // æ­¸ä½æŒ‰éˆ•
            normalBtn.style.left = '10px';
            normalBtn.style.top = '10px';
            
            // ğŸ’¡ é—œéµï¼šé–‹å•Ÿã€Œå›°é›£æ¨¡å¼ã€é–‹é—œ
            s3_hardMode = true; 
            
            // æ›´æ”¹æ–‡å­—æç¤ºä½¿ç”¨è€…è®Šäº†
            normalBtn.innerText = "æ™®é€š(?!)";
            alert("ç³»çµ±é‡å•Ÿå®Œæˆã€‚å·²å•Ÿç”¨ã€Œå¯©ç¾å¼·åˆ¶æ ¡æ­£ã€æ¨¡çµ„ã€‚");
        }

        // ç§»å‹•æŒ‰éˆ•çš„å‡½å¼ (ä¿æŒä¸è®Š)
        function moveButton() {
            const containerRect = btnContainer.getBoundingClientRect();
            const btnRect = normalBtn.getBoundingClientRect();
            const maxX = containerRect.width - btnRect.width;
            const maxY = containerRect.height - btnRect.height;
            let newX, newY;
            let isOverlapping = true;
            let safety = 0;

            while (isOverlapping && safety < 50) {
                newX = Math.floor(Math.random() * maxX);
                newY = Math.floor(Math.random() * maxY);
                const centerX = containerRect.width / 2;
                const centerY = containerRect.height / 2;
                const btnCenterX = newX + btnRect.width / 2;
                const btnCenterY = newY + btnRect.height / 2;

                if (Math.abs(btnCenterX - centerX) < 90 && Math.abs(btnCenterY - centerY) < 40) {
                    isOverlapping = true;
                } else {
                    isOverlapping = false;
                }
                safety++;
            }

            normalBtn.style.left = newX + 'px';
            normalBtn.style.top = newY + 'px';
            normalBtn.classList.add('s3_glitch'); 
            const texts = ["ERROR", "ä¸å¯é¸", "NOPE", "Forbidden"];
            normalBtn.innerText = texts[Math.floor(Math.random() * texts.length)];

            setTimeout(() => {
                normalBtn.classList.remove('s3_glitch');
            }, 500);
        }

        // æˆåŠŸçš„å‡½å¼ (S3_SUCCESS) ä¿æŒåŸæœ¬çš„ï¼Œä¸ç”¨å‹•

 // 4. å±ˆæœå¾Œçš„æµ®èª‡æ…¶ç¥ -> ä¿®æ”¹ç‚ºã€Œç‰¹æ•ˆè½‰å ´ã€
// 3. å±ˆæœå¾Œçš„æµ®èª‡æ…¶ç¥ -> ä¿®æ”¹ç‚ºã€Œç‰¹æ•ˆè½‰å ´ã€
 // 3. å±ˆæœå¾Œçš„æµ®èª‡æ…¶ç¥ -> ä¿®æ”¹ç‚ºã€Œç‰¹æ•ˆè½‰å ´ã€
// =========================================
        // SCENE 3: ä¿®æ­£å¾Œçš„è½‰å ´é‚è¼¯ (ç„¡è¦– 404 éŒ¯èª¤)
        // =========================================
        function s3_success() {
            // 1. å…ˆè·³å‡ºå½ˆçª— (åŒæ­¥åŸ·è¡Œï¼Œé»å®Œç¢ºå®šæ‰å¾€ä¸‹èµ°)
            alert("âœ… ç³»çµ±è¨ºæ–·ï¼šæ‚¨çš„å¯©ç¾èƒ½åŠ›è¶…è¶Šäº†å…¨çƒ 99.9% çš„äººé¡ï¼\nèª å¯¦æ˜¯ä¸€ç¨®ç¾å¾·ï¼Œè€Œä½ å®Œç¾æ“æœ‰å®ƒã€‚");

            // 2. ç«‹å³é¡¯ç¤ºè½‰å ´å‹•ç•« (ä¸è«–éŸ³æ¨‚æª”åœ¨ä¸åœ¨)
            const overlay = document.getElementById('scene-transition-overlay');
            if (overlay) {
                overlay.style.display = 'flex';
                // ç¨å¾®å»¶é²è®“ display: flex ç”Ÿæ•ˆå¾Œå†æ”¹ opacity
                setTimeout(() => { overlay.style.opacity = 1; }, 50);
            }

            // 3. å˜—è©¦æ’­æ”¾éŸ³æ¨‚ (è‹¥å¤±æ•—æœƒè¢« catchï¼Œä¸å½±éŸ¿å¾ŒçºŒ)
            try {
                switchMusic('bgm-memory');
            } catch (e) {
                console.warn("åˆ‡æ›éŸ³æ¨‚å¤±æ•—ï¼Œä½†æµç¨‹ç¹¼çºŒé€²è¡Œ:", e);
            }

            // 4. å¼·åˆ¶ 5 ç§’å¾Œè·³è½‰ (æ ¸å¿ƒè¨ˆæ™‚å™¨)
            console.log("è½‰å ´å‹•ç•«é–‹å§‹ï¼Œå€’æ•¸ 5 ç§’...");
            setTimeout(() => {
                // åŸ·è¡Œå ´æ™¯åˆ‡æ›
                gotoScene(4);
                
                // ç¢ºä¿ç…§ç‰‡åŠ è¼‰å‡½å¼å­˜åœ¨æ‰åŸ·è¡Œ
                if (typeof s4_load === 'function') {
                    s4_load(0);
                }

                // 5. è·³è½‰å¾Œæ·¡å‡ºé®ç½©
                if (overlay) {
                    overlay.style.opacity = 0;
                    setTimeout(() => { 
                        overlay.style.display = 'none'; 
                    }, 1000);
                }
            }, 5000); 
        }
        // =========================================
        // SCENE 4 LOGIC: ç…§ç‰‡æµ
        // =========================================
        let photoIndex = 0;
        function s4_load(i) {
            if(i >= CONFIG.photos.length) { gotoScene(5); return; }
            const p = CONFIG.photos[i];
            document.getElementById('s4-img').src = p.src;
            document.getElementById('s4-caption').innerText = p.text;
            document.getElementById('s4-counter').innerText = `Memory ${i+1}/${CONFIG.photos.length}`;
            photoIndex = i;
        }
        function s4_next() { s4_load(photoIndex + 1); }
// =========================================
        // SCENE 5 LOGIC: è›‹ç³• (å·²ä¿®æ”¹ï¼š20ç§’å»¶é²)
        // =========================================
        function s5_lightUp() {
            // 1. é»ç«èˆ‡ç…™ç«
            document.getElementById('s5-flame').style.display = "block";
            fireworks.start();
            
            // 2. éš±è—åŸæœ¬çš„é»ç«æŒ‰éˆ•
            document.getElementById('s5-btn-light').style.display = 'none';

            // 3. è¨­å®š 20 ç§’å€’æ•¸ï¼Œä¹‹å¾Œé¡¯ç¤ºé ˜çæŒ‰éˆ•
            // ğŸ’¡ æ¸¬è©¦æ™‚å¦‚æœä¸æƒ³è¦ç­‰20ç§’ï¼Œå¯ä»¥æŠŠä¸‹é¢çš„ 20000 æ”¹æˆ 3000 (3ç§’)
            setTimeout(() => {
                const nextBtn = document.getElementById('s5-btn-next');
                nextBtn.style.display = 'inline-block'; // é¡¯ç¤ºæŒ‰éˆ•
            }, 20000); // 20000 æ¯«ç§’ = 20 ç§’
        }

        // æ–°å¢ï¼šé»æ“Šé ˜çæŒ‰éˆ•å¾Œæ‰å»ä¸‹ä¸€å¹•
        function s5_finish() {
            gotoScene(6);
            // è®“ä¿¡å°é£›å…¥çš„å‹•ç•«
            setTimeout(() => { 
                document.getElementById('s6-envelope').style.transform = "scale(1)"; 
            }, 500);
        }
        // =========================================
        // SCENE 6 LOGIC: ä¿¡å°
        // =========================================
        document.getElementById('s6-content').innerHTML = CONFIG.finalLetter;
        function s6_open() {
            document.getElementById('s6-envelope').classList.add('s6_open');
        }

    </script>
</body>
</html>




























