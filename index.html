<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player 21: Level Up (Prototype)</title>
    <script src="https://cdn.jsdelivr.net/npm/fireworks-js@2.10.7/dist/index.umd.js"></script>
    <style>
        /* ==================== åŸºç¤æ¨£å¼ (éª¨æ¶) ==================== */
        body {
            margin: 0; padding: 0; 
            background-color: #000; color: #fff; font-family: sans-serif;
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
            overflow: hidden; text-align: center;
        }

        /* å ´æ™¯é€šç”¨è¨­å®šï¼šé è¨­éš±è—ï¼Œçµ•å°å®šä½ç–Šåœ¨ä¸€èµ· */
        .scene {
            display: none; /* é è¨­éš±è— */
            width: 80%; max-width: 500px;
            padding: 20px; border: 1px solid #555; border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 10;
        }

        /* é¡¯ç¤ºå ´æ™¯ç”¨çš„ class */
        .scene.active { display: block; }

        /* æŒ‰éˆ•åŸºç¤æ¨£å¼ */
        button {
            padding: 10px 20px; margin: 10px; cursor: pointer;
            font-size: 1rem; background: #ff4d6d; color: white; border: none; border-radius: 5px;
        }
        
        /* ç…§ç‰‡å€æ¨£å¼ */
        #photo-display {
            width: 100%; height: 300px; background: #222; margin: 10px 0;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; border: 1px solid #444;
        }
        #photo-img { max-width: 100%; max-height: 100%; display: block; }
        #photo-caption { min-height: 50px; padding: 10px; font-size: 1.1rem; }

        /* è›‹ç³•ç°¡å–®ç¤ºæ„ (å…ˆç”¨æ–¹å¡Šä»£æ›¿ï¼Œç¢ºèªåŠŸèƒ½) */
        .simple-cake { width: 100px; height: 100px; background: pink; margin: 20px auto; display: flex; align-items: center; justify-content: center; color: #333; }

        /* ç…™ç«å±¤ */
        #fireworks-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        
        /* ä¿¡å°å€ */
        #letter-box { display: none; margin-top: 20px; border: 2px dashed #fff; padding: 20px; cursor: pointer; }
        #final-message { display: none; text-align: left; line-height: 1.6; margin-top: 20px; border-top: 1px solid #555; padding-top: 10px; }
    </style>
</head>
<body>

    <div id="fireworks-canvas"></div>

    <audio id="bgm-login" loop><source src="bg_login.mp3" type="audio/mpeg"></audio>
    <audio id="bgm-memory" loop><source src="bg_memory.mp3" type="audio/mpeg"></audio>
    <audio id="bgm-party" loop><source src="bg_party.mp3" type="audio/mpeg"></audio>


    <div id="scene-1" class="scene active">
        <h2>ğŸ”’ ç³»çµ±ç™»å…¥</h2>
        <p>è«‹è¼¸å…¥ Player 21 ID å¯†ç¢¼</p>
        <input type="password" id="inp-password" placeholder="0121" style="padding:10px;">
        <br>
        <button onclick="checkLogin()">ç™»å…¥ç³»çµ±</button>
    </div>


    <div id="scene-2" class="scene">
        <h2>âš ï¸ å®‰å…¨æ€§é©—è­‰ I</h2>
        <p>æº–å‚™å¥½é€²å…¥ 21 æ­²å‰¯æœ¬äº†å—ï¼Ÿ</p>
        <div style="height: 150px; position: relative;">
            <button onclick="gotoScene(3)">æº–å‚™å¥½äº†ï¼</button>
            <button id="btn-runaway" onmouseover="runAway()" onclick="runAway()" style="position: absolute;">é‚„æ²’...</button>
        </div>
    </div>


    <div id="scene-3" class="scene">
        <h2>âš ï¸ å®‰å…¨æ€§é©—è­‰ II</h2>
        <p>è«‹å•è£½ä½œé€™å€‹ç¶²é çš„äººæŠ€è¡“å¦‚ä½•ï¼Ÿ</p>
        <button onclick="honestyCheck(false)">æ ¹æœ¬èœé›</button>
        <button onclick="honestyCheck(true)">ç¥ç´šæ“ä½œ</button>
    </div>


    <div id="scene-4" class="scene">
        <h3 id="photo-counter">å›æ†¶è®€å–ä¸­...</h3>
        <div id="photo-display">
            <img id="photo-img" src="" alt="Photo">
        </div>
        <div id="photo-caption"></div>
        <button onclick="nextPhoto()">ä¸‹ä¸€å¼µ (é»æ“Šç¹¼çºŒ)</button>
    </div>


    <div id="scene-5" class="scene">
        <h2>ğŸ‰ Level 21 Unlocked!</h2>
        <div class="simple-cake">ğŸ‚ è›‹ç³•æº–å‚™ä¸­</div>
        <p>è¨±å€‹é¡˜å§ï¼</p>
        <button onclick="lightCandle()">é»ç‡ƒè–ç« (é–‹å§‹æ…¶ç¥)</button>
    </div>


    <div id="scene-6" class="scene" style="background: rgba(0,0,0,0.8);">
        <h2>ğŸ ç²å¾—å‚³èªªç´šæ‰è½ç‰©</h2>
        <p>æª¢æ¸¬åˆ°ä¸€å€‹æœªé–‹å•Ÿçš„ä¿¡ä»¶...</p>
        
        <div id="letter-box" style="display:block;" onclick="openLetter()">
            ğŸ“© é»æ“Šé–‹å•Ÿä¿¡ä»¶
        </div>

        <div id="final-message">
            </div>
    </div>


    <script>
        // ============ 1. CONFIG: è³‡æ–™è¨­å®šå€ ============
        const CONFIG = {
            password: "0121",
            // ç…§ç‰‡æ¸…å–®ï¼šè«‹ç¢ºä¿ä½ æœ‰ photo1.jpg åˆ° photo5.jpg (æˆ–æ˜¯ä½ æ”¹æª”å)
            // å…ˆç”¨å‡åœ– (Placeholder) æ¸¬è©¦åŠŸèƒ½ï¼Œä½ å¯ä»¥ä¹‹å¾Œæ›æˆçœŸåœ–
            photos: [
                { src: "photo1.jpg", text: "é€™æ˜¯æˆ‘å€‘ç¬¬ä¸€æ¬¡çµ„éšŠ..." },
                { src: "photo2.jpg", text: "é‚£æ™‚å€™å¦³é‚„åœ¨é›·..." },
                { src: "photo3.jpg", text: "çµ‚æ–¼è´äº†ä¸€å ´ï¼" },
                // ... ä½ å¯ä»¥åŠ æ›´å¤š
            ],
            finalLetter: `
                <strong>To 21æ­²çš„å¦³ï¼š</strong><br><br>
                ç”Ÿæ—¥å¿«æ¨‚ï¼é€™æ˜¯ä¸€å°è—åœ¨ç¨‹å¼ç¢¼å¾Œçš„ä¿¡ã€‚<br>
                é›–ç„¶åªæ˜¯ç°¡å–®çš„ç¶²é ï¼Œ<br>
                ä½†åŒ…å«äº†æˆ‘å€‘é€™ä¸€å¹´æ»¿æ»¿çš„å›æ†¶ã€‚<br>
                ç¥å¦³å‡ç´šå¿«æ¨‚ï¼Œç¹¼çºŒ Carry æˆ‘ï¼
            `
        };

        // å…¨åŸŸè®Šæ•¸
        let currentPhotoIndex = 0;
        const fireworks = new Fireworks.default(document.querySelector('#fireworks-canvas'));

        // ============ 2. åŠŸèƒ½å‡½å¼ ============

        // åˆ‡æ›å ´æ™¯é€šç”¨å‡½å¼
        function gotoScene(sceneNum) {
            // éš±è—æ‰€æœ‰å ´æ™¯
            document.querySelectorAll('.scene').forEach(el => el.classList.remove('active'));
            // é¡¯ç¤ºç›®æ¨™å ´æ™¯
            document.getElementById(`scene-${sceneNum}`).classList.add('active');
            
            // éŸ³æ¨‚åˆ‡æ›é‚è¼¯ (ç°¡å–®ç‰ˆ)
            if(sceneNum === 4) playMusic('bgm-memory'); // é€²å…¥ç…§ç‰‡å€æ’­æº«é¦¨éŸ³æ¨‚
            if(sceneNum === 5) playMusic('bgm-party');  // é€²å…¥è›‹ç³•å€æ’­å—¨æ­Œ
        }

        // éŸ³æ¨‚æ’­æ”¾å™¨
        function playMusic(id) {
            // å…ˆæš«åœæ‰€æœ‰éŸ³æ¨‚
            document.querySelectorAll('audio').forEach(audio => {
                audio.pause();
                audio.currentTime = 0;
            });
            // æ’­æ”¾æŒ‡å®šéŸ³æ¨‚
            const target = document.getElementById(id);
            if(target) target.play().catch(e => console.log("éŸ³æ¨‚æ’­æ”¾å—é˜»(æ­£å¸¸ç¾è±¡):", e));
        }

        // --- Scene 1: ç™»å…¥ ---
        function checkLogin() {
            const input = document.getElementById('inp-password').value;
            if(input === CONFIG.password) {
                playMusic('bgm-login');
                gotoScene(2);
            } else {
                alert("å¯†ç¢¼éŒ¯èª¤ï¼æç¤ºï¼šç”Ÿæ—¥");
            }
        }

        // --- Scene 2: é€ƒè·‘æŒ‰éˆ• ---
        function runAway() {
            const btn = document.getElementById('btn-runaway');
            // è®“å®ƒåœ¨å ´æ™¯æ¡†æ¡†å…§äº‚è·‘
            const x = Math.random() * 200 - 100; // -100 åˆ° 100
            const y = Math.random() * 200 - 100;
            btn.style.transform = `translate(${x}px, ${y}px)`;
            btn.innerText = "æŠ“ä¸åˆ°ï¼";
        }

        // --- Scene 3: èª å¯¦æ¸¬è©¦ ---
        function honestyCheck(isPro) {
            if(isPro) {
                alert("é©—è­‰é€šéï¼ç®—å¦³è­˜ç›¸ XD");
                // åˆå§‹åŒ–ç…§ç‰‡å€ï¼Œæº–å‚™é€²å…¥ä¸‹ä¸€é—œ
                loadPhoto(0);
                gotoScene(4);
            } else {
                alert("â›” ç³»çµ±éŒ¯èª¤ï¼åµæ¸¬åˆ°è¬Šè¨€ï¼Œè«‹é‡é¸ï¼");
            }
        }

        // --- Scene 4: ç…§ç‰‡æµå‹• ---
        function loadPhoto(index) {
            if(index >= CONFIG.photos.length) {
                // ç…§ç‰‡æ’­å®Œäº†ï¼Œé€²å…¥ä¸‹ä¸€é—œ
                gotoScene(5);
                return;
            }
            const data = CONFIG.photos[index];
            
            // å¦‚æœä½ é‚„æ²’ä¸Šå‚³ç…§ç‰‡ï¼Œé€™è£¡æœƒé¡¯ç¤ºç ´åœ– iconï¼Œä½†ä¸å½±éŸ¿åŠŸèƒ½æ¸¬è©¦
            document.getElementById('photo-img').src = data.src; 
            document.getElementById('photo-caption').innerText = data.text;
            document.getElementById('photo-counter').innerText = `å›æ†¶è®€å–ä¸­... (${index + 1}/${CONFIG.photos.length})`;
            
            currentPhotoIndex = index;
        }

        function nextPhoto() {
            loadPhoto(currentPhotoIndex + 1);
        }

        // --- Scene 5: é»ç« ---
        function lightCandle() {
            // å•Ÿå‹•ç…™ç«
            fireworks.start();
            // é€²å…¥æœ€å¾Œä¸€å¹•
            gotoScene(6);
        }

        // --- Scene 6: é–‹ä¿¡ ---
        function openLetter() {
            const box = document.getElementById('letter-box');
            const msg = document.getElementById('final-message');
            
            box.style.display = 'none'; // éš±è—æŒ‰éˆ•
            msg.innerHTML = CONFIG.finalLetter; // å¡«å…¥å…§å®¹
            msg.style.display = 'block'; // é¡¯ç¤ºä¿¡ä»¶
        }

    </script>
</body>
</html>
